"""Промпты для анализа транскрипций с помощью Claude AI."""


SEGMENTATION_PROMPT_TEMPLATE = """Проанализируй этот фрагмент транскрипции видео и определи оптимальные точки для нарезки.

Транскрипция (время {start_time:.1f}s - {end_time:.1f}s):
{segments_json}

Задача: Найди логические границы между темами, мыслями или сценами.

Верни JSON со следующей структурой:
{{
  "segments": [
    {{
      "start": <начальное время в секундах>,
      "end": <конечное время в секундах>,
      "topic": "<краткое описание темы сегмента>",
      "reason": "<почему это отдельный сегмент>"
    }}
  ]
}}

Критерии для определения границ:
- Смена темы или контекста
- Паузы в речи
- Завершенные мысли
- Логические переходы
- Изменение интонации (если заметно по тексту)

Верни ТОЛЬКО валидный JSON, без дополнительного текста."""


def create_segmentation_prompt(segments_json: str, start_time: float, end_time: float) -> str:
    """
    Создает промпт для анализа фрагмента транскрипции.

    Args:
        segments_json: JSON-представление сегментов
        start_time: Начальное время фрагмента в секундах
        end_time: Конечное время фрагмента в секундах

    Returns:
        Отформатированный промпт для Claude
    """
    return SEGMENTATION_PROMPT_TEMPLATE.format(
        segments_json=segments_json,
        start_time=start_time,
        end_time=end_time
    )
